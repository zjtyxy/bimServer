/* 2018-3-10 12:34:16 | 版权所有 广西中遥科技有限公司 http://www.ciat.com.cn  【联系我们QQ：7597648，微信：nituan2008】 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.sortable=t(e.jQuery)}(this,function(u){"use strict";var v,b,x=u(),I=[],C=function(e){e.off("dragstart.h5s"),e.off("dragend.h5s"),e.off("selectstart.h5s"),e.off("dragover.h5s"),e.off("dragenter.h5s"),e.off("drop.h5s")},y=function(e){e.off("dragover.h5s"),e.off("dragenter.h5s"),e.off("drop.h5s")},D=function(e,t){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t.item,t.x,t.y)},E=function(e,t){var a,r,n,i={item:(a=t)[0],draggedItem:a};r=e,(n=i).x||(n.x=parseInt(r.pageX-n.draggedItem.offset().left)),n.y||(n.y=parseInt(r.pageY-n.draggedItem.offset().top)),D(e,i=n)},w=function(e,t){return e[0]===t[0]||void 0!==e.data("connectWith")&&e.data("connectWith")===t.data("connectWith")},W=function(e){var t=e.data("opts"),a=e.children(t.items),r=t.handle?a.find(t.handle):a;e.attr("aria-dropeffect","move"),r.attr("draggable","true"),"function"!=typeof(document||window.document).createElement("span").dragDrop||t.disableIEFix||r.on("mousedown.h5s",function(){-1!==a.index(this)?this.dragDrop():u(this).parents(t.items)[0].dragDrop()})},A=function(e,p){var t=u(e),m=String(p);return p=u.extend({connectWith:!1,placeholder:null,dragImage:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1},p),t.each(function(){var n=u(this);if(/enable|disable|destroy/.test(m))A[m](n);else{var e,t,a,r,i,d;i=n.data("opts"),d=p,p=void 0===i?d:i,n.data("opts",p),t=(e=n).data("opts"),a=e.children(t.items),r=t.handle?a.find(t.handle):a,C(a),r.off("mousedown.h5s"),y(e);var o,s,l,f=n.children(p.items),h=null===p.placeholder?u("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="'+p.placeholderClass+'"/>'):u(p.placeholder).addClass(p.placeholderClass);if(!n.attr("data-sortable-id")){var g=I.length;(I[g]=n).attr("data-sortable-id",g),f.attr("data-item-sortable-id",g)}if(n.data("items",p.items),x=x.add(h),p.connectWith&&n.data("connectWith",p.connectWith),W(n),f.attr("role","option"),f.attr("aria-grabbed","false"),p.hoverClass){var c="sortable-over";"string"==typeof p.hoverClass&&(c=p.hoverClass),f.hover(function(){u(this).addClass(c)},function(){u(this).removeClass(c)})}f.on("dragstart.h5s",function(e){e.stopImmediatePropagation(),p.dragImage?(D(e.originalEvent,{item:p.dragImage,x:0,y:0}),console.log("WARNING: dragImage option is deprecated and will be removed in the future!")):E(e.originalEvent,u(this),p.dragImage),(v=u(this)).addClass(p.draggingClass),v.attr("aria-grabbed","true"),o=v.index(),b=v.height(),s=u(this).parent(),v.parent().triggerHandler("sortstart",{item:v,placeholder:h,startparent:s})}),f.on("dragend.h5s",function(){v&&(v.removeClass(p.draggingClass),v.attr("aria-grabbed","false"),v.show(),x.detach(),l=u(this).parent(),v.parent().triggerHandler("sortstop",{item:v,startparent:s}),(o!==v.index()||s.get(0)!==l.get(0))&&v.parent().triggerHandler("sortupdate",{item:v,index:l.children(l.data("items")).index(v),oldindex:f.index(v),elementIndex:v.index(),oldElementIndex:o,startparent:s,endparent:l}),b=v=null)}),u(this).add([h]).on("drop.h5s",function(e){return w(n,u(v).parent())?(e.stopPropagation(),x.filter(":visible").after(v),v.trigger("dragend.h5s"),!1):void 0}),f.add([this]).on("dragover.h5s dragenter.h5s",function(e){if(w(n,u(v).parent())){if(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",f.is(this)){var t=u(this).height();if(p.forcePlaceholderSize&&h.height(b),b<t){var a=t-b,r=u(this).offset().top;if(h.index()<u(this).index()&&e.originalEvent.pageY<r+a)return!1;if(h.index()>u(this).index()&&e.originalEvent.pageY>r+t-a)return!1}v.hide(),h.index()<u(this).index()?u(this).after(h):u(this).before(h),x.not(h).detach()}else x.is(this)||u(this).children(p.items).length||(x.detach(),u(this).append(h));return!1}})}})};return A.destroy=function(e){var t,a,r,n,i,d;n=(t=e).data("opts")||{},i=t.children(n.items),d=n.handle?i.find(n.handle):i,y(t),(r=t).removeData("opts"),r.removeData("connectWith"),r.removeData("items"),r.removeAttr("aria-dropeffect"),d.off("mousedown.h5s"),C(i),(a=i).removeAttr("aria-grabbed"),a.removeAttr("draggable"),a.removeAttr("role")},A.enable=function(e){W(e)},A.disable=function(e){var t,a,r,n;a=(t=e).data("opts"),r=t.children(a.items),n=a.handle?r.find(a.handle):r,t.attr("aria-dropeffect","none"),n.attr("draggable",!1),n.off("mousedown.h5s")},u.fn.sortable=function(e){return A(this,e)},A});