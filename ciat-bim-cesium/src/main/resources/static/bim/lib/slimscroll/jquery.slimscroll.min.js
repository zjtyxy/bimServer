/* 2018-3-10 12:34:16 | 版权所有 广西中遥科技有限公司 http://www.ciat.com.cn  【联系我们QQ：7597648，微信：nituan2008】 */
!function(C){C.fn.extend({slimScroll:function(y){var x=C.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},y);return this.each(function(){function e(e){if(r){var t=0;(e=e||window.event).wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3),C(e.target||e.srcTarget||e.srcElement).closest("."+x.wrapperClass).is(f.parent())&&s(t,!0),e.preventDefault&&!g&&e.preventDefault(),g||(e.returnValue=!1)}}function s(e,t,i){g=!1;var s=f.outerHeight()-v.outerHeight();t&&(t=parseInt(v.css("top"))+e*parseInt(x.wheelStep)/100*v.outerHeight(),t=Math.min(Math.max(t,0),s),t=0<e?Math.ceil(t):Math.floor(t),v.css({top:t+"px"})),t=(d=parseInt(v.css("top"))/(f.outerHeight()-v.outerHeight()))*(f[0].scrollHeight-f.outerHeight()),i&&(e=(t=e)/f[0].scrollHeight*f.outerHeight(),e=Math.min(Math.max(e,0),s),v.css({top:e+"px"})),f.scrollTop(t),f.trigger("slimscrolling",~~t),o(),a()}function i(){u=Math.max(f.outerHeight()/f[0].scrollHeight*f.outerHeight(),30),v.css({height:u+"px"});var e=u==f.outerHeight()?"none":"block";v.css({display:e})}function o(){i(),clearTimeout(h),d==~~d?(g=x.allowPageScroll,p!=d&&f.trigger("slimscroll",0==~~d?"top":"bottom")):g=!1,p=d,u>=f.outerHeight()?g=!0:(v.stop(!0,!0).fadeIn("fast"),x.railVisible&&w.stop(!0,!0).fadeIn("fast"))}function a(){x.alwaysVisible||(h=setTimeout(function(){x.disableFadeOut&&r||l||n||(v.fadeOut("slow"),w.fadeOut("slow"))},1e3))}var r,l,n,h,c,u,d,p,g=!1,f=C(this);if(f.parent().hasClass(x.wrapperClass)){var b=f.scrollTop(),v=f.siblings("."+x.barClass),w=f.siblings("."+x.railClass);if(i(),C.isPlainObject(y)){if("height"in y&&"auto"==y.height){f.parent().css("height","auto"),f.css("height","auto");var m=f.parent().parent().height();f.parent().css("height",m),f.css("height",m)}else"height"in y&&(m=y.height,f.parent().css("height",m),f.css("height",m));if("scrollTo"in y)b=parseInt(x.scrollTo);else if("scrollBy"in y)b+=parseInt(x.scrollBy);else if("destroy"in y)return v.remove(),w.remove(),void f.unwrap();s(b,!1,!0)}}else if(!(C.isPlainObject(y)&&"destroy"in y)){x.height="auto"==x.height?f.parent().height():x.height,b=C("<div></div>").addClass(x.wrapperClass).css({position:"relative",overflow:"hidden",width:x.width,height:x.height}),f.css({overflow:"hidden",width:x.width,height:x.height});w=C("<div></div>").addClass(x.railClass).css({width:x.size,height:"100%",position:"absolute",top:0,display:x.alwaysVisible&&x.railVisible?"block":"none","border-radius":x.railBorderRadius,background:x.railColor,opacity:x.railOpacity,zIndex:90}),v=C("<div></div>").addClass(x.barClass).css({background:x.color,width:x.size,position:"absolute",top:0,opacity:x.opacity,display:x.alwaysVisible?"block":"none","border-radius":x.borderRadius,BorderRadius:x.borderRadius,MozBorderRadius:x.borderRadius,WebkitBorderRadius:x.borderRadius,zIndex:99}),m="right"==x.position?{right:x.distance}:{left:x.distance};w.css(m),v.css(m),f.wrap(b),f.parent().append(v),f.parent().append(w),x.railDraggable&&v.bind("mousedown",function(e){var i=C(document);return n=!0,t=parseFloat(v.css("top")),pageY=e.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,v.css("top",currTop),s(0,v.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){n=!1,a(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),w.hover(function(){o()},function(){a()}),v.hover(function(){l=!0},function(){l=!1}),f.hover(function(){r=!0,o(),a()},function(){r=!1,a()}),f.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(c=e.originalEvent.touches[0].pageY)}),f.bind("touchmove",function(e){g||e.originalEvent.preventDefault(),e.originalEvent.touches.length&&(s((c-e.originalEvent.touches[0].pageY)/x.touchScrollStep,!0),c=e.originalEvent.touches[0].pageY)}),i(),"bottom"===x.start?(v.css({top:f.outerHeight()-v.outerHeight()}),s(0,!0)):"top"!==x.start&&(s(C(x.start).position().top,null,!0),x.alwaysVisible||v.hide()),window.addEventListener?(this.addEventListener("DOMMouseScroll",e,!1),this.addEventListener("mousewheel",e,!1)):document.attachEvent("onmousewheel",e)}}),this}}),C.fn.extend({slimscroll:C.fn.slimScroll})}(jQuery);