/* 2018-3-10 12:34:16 | 版权所有 广西中遥科技有限公司 http://www.ciat.com.cn  【联系我们QQ：7597648，微信：nituan2008】 */
!function(l){"use strict";var s="asHoverScroll",n=0,o=l[s]=function(t,i){this.element=t,this.$element=l(t),this.options=l.extend({},o.defaults,i,this.$element.data()),this.$list=l(this.options.list,this.$element),this.classes={disabled:this.options.namespace+"-disabled"},"vertical"===this.options.direction?this.attributes={page:"pageY",axis:"Y",position:"top",length:"height",offset:"offsetTop",client:"clientY",clientLength:"clientHeight"}:"horizontal"===this.options.direction&&(this.attributes={page:"pageX",axis:"X",position:"left",length:"width",offset:"offsetLeft",client:"clientX",clientLength:"clientWidth"}),this._states={},this._scroll={time:null,pointer:null},this.instanceId=++n,this._trigger("init"),this.init()};o.defaults={namespace:s,list:"> ul",item:"> li",exception:null,direction:"vertical",fixed:!1,mouseMove:!0,touchScroll:!0,pointerScroll:!0,useCssTransforms:!0,useCssTransforms3d:!0,boundary:10,throttle:20,onEnter:function(){l(this).siblings().removeClass("is-active"),l(this).addClass("is-active")},onLeave:function(){l(this).removeClass("is-active")}};var r={};(function(t){function i(t,n){var e=!1,i=t.charAt(0).toUpperCase()+t.slice(1);return l.each((t+" "+o.join(i+" ")+i).split(" "),function(t,i){return void 0!==s[i]?(e=!n||i,!1):void 0}),e}function n(t){return i(t,!0)}var s=l("<support>").get(0).style,o=["webkit","Moz","O","ms"],e={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},r=function(){return!!i("transform")},a=function(){return!!i("perspective")},h=function(){return!!i("animation")};(function(){return!!i("transition")})()&&(t.transition=new String(n("transition")),t.transition.end=e.transition.end[t.transition]),h()&&(t.animation=new String(n("animation")),t.animation.end=e.animation.end[t.animation]),r()&&(t.transform=new String(n("transform")),t.transform3d=a()),t.touch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),t.pointer=!(!window.PointerEvent&&!window.MSPointerEvent),t.convertMatrixToArray=function(t){return!(!t||"matrix"!=t.substr(0,6))&&t.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)},t.prefixPointerEvent=function(t){return window.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t}})(o.support=r),o.prototype={constructor:o,init:function(){this.initPosition(),this.updateLength(),this.bindEvents()},bindEvents:function(){var t=this,i=["enter"],n=[];this.options.mouseMove&&(this.$element.on(this.eventName("mousemove"),l.proxy(this.onMove,this)),i.push("mouseenter"),n.push("mouseleave")),this.options.touchScroll&&r.touch&&(this.$element.on(this.eventName("touchstart"),l.proxy(this.onScrollStart,this)),this.$element.on(this.eventName("touchcancel"),l.proxy(this.onScrollEnd,this))),this.options.pointerScroll&&r.pointer&&(this.$element.on(this.eventName(r.prefixPointerEvent("pointerdown")),l.proxy(this.onScrollStart,this)),this.$element.on(this.eventName(r.prefixPointerEvent("pointercancel")),l.proxy(this.onScrollEnd,this))),this.$list.on(this.eventName(i.join(" ")),this.options.item,function(){t.is("scrolling")||t.options.onEnter.call(this)}),this.$list.on(this.eventName(n.join(" ")),this.options.item,function(){t.is("scrolling")||t.options.onLeave.call(this)}),l(window).on(this.eventNameWithId("orientationchange"),function(){t.update.call(t)}),l(window).on(this.eventNameWithId("resize"),this.throttle(function(){t.update.call(t)},this.options.throttle))},unbindEvents:function(){this.$element.off(this.eventName()),this.$list.off(this.eventName()),l(window).off(this.eventNameWithId())},onScrollStart:function(t){var i=this;if(3!==t.which&&!(0<l(t.target).closest(this.options.exception).length)){this._scroll.time=(new Date).getTime(),this._scroll.pointer=this.pointer(t),this._scroll.start=this.getPosition(),this._scroll.moved=!1;var n=function(){i.enter("scrolling"),i._trigger("scroll")};this.options.touchScroll&&r.touch&&(l(document).on(i.eventName("touchend"),l.proxy(this.onScrollEnd,this)),l(document).one(i.eventName("touchmove"),l.proxy(function(){l(document).on(i.eventName("touchmove"),l.proxy(this.onScrollMove,this)),n()},this))),this.options.pointerScroll&&r.pointer&&(l(document).on(i.eventName(r.prefixPointerEvent("pointerup")),l.proxy(this.onScrollEnd,this)),l(document).one(i.eventName(r.prefixPointerEvent("pointermove")),l.proxy(function(){l(document).on(i.eventName(r.prefixPointerEvent("pointermove")),l.proxy(this.onScrollMove,this)),n()},this))),l(document).on(i.eventName("blur"),l.proxy(this.onScrollEnd,this)),t.preventDefault()}},onScrollMove:function(t){this._scroll.updated=this.pointer(t);var i=this.distance(this._scroll.pointer,this._scroll.updated);if((10<Math.abs(this._scroll.pointer.x-this._scroll.updated.x)||10<Math.abs(this._scroll.pointer.y-this._scroll.updated.y))&&(this._scroll.moved=!0),this.is("scrolling")){t.preventDefault();var n=this._scroll.start+i;this.canScroll()&&(0<n?n=0:n<this.containerLength-this.listLength&&(n=this.containerLength-this.listLength),this.updatePosition(n))}},onScrollEnd:function(t){var i=this;this.options.touchScroll&&r.touch&&l(document).off(this.eventName("touchmove touchend")),this.options.pointerScroll&&r.pointer&&l(document).off(this.eventName(r.prefixPointerEvent("pointerup"))),l(document).off(this.eventName("blur")),this._scroll.moved||l(t.target).trigger("tap"),this.is("scrolling")&&setTimeout(function(){i.leave("scrolling"),i._trigger("scrolled")},500)},pointer:function(t){var i={x:null,y:null};return(t=this.getEvent(t)).pageX&&!this.options.fixed?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},getEvent:function(t){return(t=t.originalEvent||t||window.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t},distance:function(t,i){return"vertical"===this.options.direction?i.y-t.y:i.x-t.x},onMove:function(t){var i,n;(t=this.getEvent(t),!this.is("scrolling")&&this.isMatchScroll(t))&&((n=(t[this.attributes.page]&&!this.options.fixed?t[this.attributes.page]:t[this.attributes.client])-this.element[this.attributes.offset])<this.options.boundary?i=0:(i=(n-this.options.boundary)*this.multiplier)>this.listLength-this.containerLength&&(i=this.listLength-this.containerLength),this.updatePosition(-i))},isMatchScroll:function(t){return!(this.is("disabled")||!this.canScroll())&&(!this.options.exception||0===l(t.target).closest(this.options.exception).length)},canScroll:function(){return this.listLength>this.containerLength},getContainerLength:function(){return this.element[this.attributes.clientLength]},getListhLength:function(){return this.$list[0][this.attributes.clientLength]},updateLength:function(){this.containerLength=this.getContainerLength(),this.listLength=this.getListhLength(),this.multiplier=(this.listLength-this.containerLength)/(this.containerLength-2*this.options.boundary)},initPosition:function(){var t=this.makePositionStyle(0);this.$list.css(t)},getPosition:function(){var t;if(this.options.useCssTransforms&&r.transform){if(!(t=r.convertMatrixToArray((this.options.useCssTransforms3d&&r.transform3d,this.$list.css(r.transform)))))return 0;t="X"===this.attributes.axis?t[12]||t[4]:t[13]||t[5]}else t=this.$list.css(this.attributes.position);return parseFloat(t.replace("px",""))},makePositionStyle:function(t){var i,n="0px",e="0px";this.options.useCssTransforms&&r.transform?("X"===this.attributes.axis?n=t+"px":e=t+"px",i=r.transform.toString(),t=this.options.useCssTransforms3d&&r.transform3d?"translate3d("+n+","+e+",0px)":"translate("+n+","+e+")"):i=this.attributes.position;var s={};return s[i]=t,s},updatePosition:function(t){var i=this.makePositionStyle(t);this.$list.css(i)},update:function(){this.is("disabled")||(this.updateLength(),this.canScroll()||this.initPosition())},eventName:function(t){if("string"!=typeof t||""===t)return"."+s;for(var i=(t=t.split(" ")).length,n=0;n<i;n++)t[n]=t[n]+"."+s;return t.join(" ")},eventNameWithId:function(t){if("string"!=typeof t||""===t)return this.options.namespace+"-"+this.instanceId;for(var i=(t=t.split(" ")).length,n=0;n<i;n++)t[n]=t[n]+"."+this.options.namespace+"-"+this.instanceId;return t.join(" ")},_trigger:function(t){var i=Array.prototype.slice.call(arguments,1),n=[this].concat(i);this.$element.trigger(s+"::"+t,n);var e="on"+(t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}));"function"==typeof this.options[e]&&this.options[e].apply(this,i)},is:function(t){return this._states[t]&&0<this._states[t]},enter:function(t){void 0===this._states[t]&&(this._states[t]=0),this._states[t]++},leave:function(t){this._states[t]--},throttle:function(n,e){var s,o,r,a=Date.now||function(){return(new Date).getTime()},h=null,l=0,c=function(){l=a(),h=null,r=n.apply(s,o),s=o=null};return function(){var t=a(),i=e-(t-l);return s=this,o=arguments,i<=0?(clearTimeout(h),h=null,l=t,r=n.apply(s,o),s=o=null):h||(h=setTimeout(c,i)),r}},enable:function(){this.is("disabled")&&(this.leave("disabled"),this.$element.removeClass(this.classes.disabled),this.bindEvents())},disable:function(){this.is("disabled")||(this.enter("disabled"),this.initPosition(),this.$element.addClass(this.classes.disabled),this.unbindEvents())},destory:function(){this.$element.removeClass(this.classes.disabled),this.unbindEvents(),this.$element.data(s,null),this._trigger("destory")}},l.fn[s]=function(t){if("string"!=typeof t)return this.each(function(){l.data(this,s)||l.data(this,s,new o(this,t))});var i=t,n=Array.prototype.slice.call(arguments,1);if(/^\_/.test(i))return!1;if(!/^(get)/.test(i))return this.each(function(){var t=l.data(this,s);t&&"function"==typeof t[i]&&t[i].apply(t,n)});var e=this.first().data(s);return e&&"function"==typeof e[i]?e[i].apply(e,n):void 0}}(jQuery);